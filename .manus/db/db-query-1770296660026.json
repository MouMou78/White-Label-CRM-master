{
  "query": "-- First update automationRules with missing columns\nALTER TABLE automationRules \n  ADD COLUMN IF NOT EXISTS conditions TEXT,\n  ADD COLUMN IF NOT EXISTS priority INTEGER DEFAULT 5,\n  ADD COLUMN IF NOT EXISTS schedule TEXT,\n  ADD COLUMN IF NOT EXISTS timezone TEXT,\n  ADD COLUMN IF NOT EXISTS nextRunAt DATETIME;\n\n-- Create userTemplates table\nCREATE TABLE IF NOT EXISTS userTemplates (\n  id VARCHAR(255) PRIMARY KEY,\n  userId VARCHAR(255) NOT NULL,\n  tenantId VARCHAR(255) NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  category VARCHAR(50) NOT NULL,\n  triggerType VARCHAR(50) NOT NULL,\n  triggerConfig TEXT,\n  actionType VARCHAR(50) NOT NULL,\n  actionConfig TEXT,\n  conditions TEXT,\n  priority INTEGER DEFAULT 5,\n  isPublic BOOLEAN DEFAULT FALSE,\n  baseTemplateId VARCHAR(255),\n  version INTEGER DEFAULT 1,\n  changelog TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create templateReviews table\nCREATE TABLE IF NOT EXISTS templateReviews (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL,\n  userId VARCHAR(255) NOT NULL,\n  rating INTEGER NOT NULL,\n  review TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create templateAnalytics table\nCREATE TABLE IF NOT EXISTS templateAnalytics (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL UNIQUE,\n  installCount INTEGER DEFAULT 0,\n  successCount INTEGER DEFAULT 0,\n  failureCount INTEGER DEFAULT 0,\n  lastUsed DATETIME,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create templateVersions table\nCREATE TABLE IF NOT EXISTS templateVersions (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL,\n  version INTEGER NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  triggerType VARCHAR(50) NOT NULL,\n  triggerConfig TEXT,\n  actionType VARCHAR(50) NOT NULL,\n  actionConfig TEXT,\n  conditions TEXT,\n  priority INTEGER DEFAULT 5,\n  changelog TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2QkRhwd4AVTLhHG.a0950ca1ba2f --database TQEsx2HByTQrcAiUBn2kww --execute -- First update automationRules with missing columns\nALTER TABLE automationRules \n  ADD COLUMN IF NOT EXISTS conditions TEXT,\n  ADD COLUMN IF NOT EXISTS priority INTEGER DEFAULT 5,\n  ADD COLUMN IF NOT EXISTS schedule TEXT,\n  ADD COLUMN IF NOT EXISTS timezone TEXT,\n  ADD COLUMN IF NOT EXISTS nextRunAt DATETIME;\n\n-- Create userTemplates table\nCREATE TABLE IF NOT EXISTS userTemplates (\n  id VARCHAR(255) PRIMARY KEY,\n  userId VARCHAR(255) NOT NULL,\n  tenantId VARCHAR(255) NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  category VARCHAR(50) NOT NULL,\n  triggerType VARCHAR(50) NOT NULL,\n  triggerConfig TEXT,\n  actionType VARCHAR(50) NOT NULL,\n  actionConfig TEXT,\n  conditions TEXT,\n  priority INTEGER DEFAULT 5,\n  isPublic BOOLEAN DEFAULT FALSE,\n  baseTemplateId VARCHAR(255),\n  version INTEGER DEFAULT 1,\n  changelog TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create templateReviews table\nCREATE TABLE IF NOT EXISTS templateReviews (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL,\n  userId VARCHAR(255) NOT NULL,\n  rating INTEGER NOT NULL,\n  review TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create templateAnalytics table\nCREATE TABLE IF NOT EXISTS templateAnalytics (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL UNIQUE,\n  installCount INTEGER DEFAULT 0,\n  successCount INTEGER DEFAULT 0,\n  failureCount INTEGER DEFAULT 0,\n  lastUsed DATETIME,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create templateVersions table\nCREATE TABLE IF NOT EXISTS templateVersions (\n  id VARCHAR(255) PRIMARY KEY,\n  templateId VARCHAR(255) NOT NULL,\n  version INTEGER NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  triggerType VARCHAR(50) NOT NULL,\n  triggerConfig TEXT,\n  actionType VARCHAR(50) NOT NULL,\n  actionConfig TEXT,\n  conditions TEXT,\n  priority INTEGER DEFAULT 5,\n  changelog TEXT,\n  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 385
}